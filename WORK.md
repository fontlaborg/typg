# typg WORK log

made by FontLab https://www.fontlab.com/

| Date (UTC) | Goal | Notes | Tests |
| --- | --- | --- | --- |
| 2025-12-03 | Name-table metadata + deterministic output | Ingested name-table family/typo/full/PostScript strings into metadata, deduped/sorted tags/codepoints/names, pointed fixtures at repo-level test fonts, and added name-regex regression tests for core + CLI. | cargo test --workspace; PYTHONPATH=typg-python/python pytest typg-python/tests -q |
| 2025-12-03 | Add OS/2 family-class filter + clean Python artifacts | Added family-class parsing (numeric, hex, aliases) across core/CLI/cache/HTTP/Python, wired new flag through CLI/server/Fire CLI, updated README/spec/CHANGELOG, and ignored/removed built `.so`/`__pycache__` artifacts. | cargo test --workspace; PYTHONPATH=typg-python/python pytest typg-python/tests -q |
| 2025-12-03 | Validation polish for paths-only surfaces | Added Axum bad-request tests for `/search` (missing paths, jobs=0), CLI integration test keeping `--paths` output ANSI-free even with `--color always`, and Python coverage for `find_paths` plus CLI `paths_only`; updated PLAN/TODO/CHANGELOG accordingly. | cargo test --workspace; PYTHONPATH=typg-python/python pytest typg-python/tests -q |
| 2025-12-03 | OS/2 weight/width filters + lint/health hardening | Added OS/2 weight/width range filters across core/CLI/cache/Python/HTTP, updated docs/spec/README, silenced typg-python `too_many_arguments` lint, added jobs=0 rejection + `/health` test coverage, and rebuilt bindings/wheel. | cargo fmt --all; cargo test --workspace; (venv) pytest tests |
| 2025-12-03 | Integration outputs + HTTP server | Added `--paths` output for find/cache, Python `find_paths` + `paths_only` flag for typgpy, and `typg serve` HTTP endpoint with `/search` (JSON or paths-only) + `/health`; updated docs/TODO/PLAN/CHANGELOG. | cargo fmt --all; cargo test --workspace |
| 2025-12-03 | Cache subcommands + JSON cache + CLI tests | Added `typg cache add/list/find/clean` with env/default cache path resolution, dedup + prune helpers, shared output formatter, and cache integration/unit tests; refreshed README/PLAN/TODO/spec/ARCHITECTURE/CHANGELOG. `cargo clippy --all-targets -D warnings` still flags existing typg-python bindings for too many arguments. | cargo fmt --all; cargo test --workspace |
| 2025-12-03 | CLI jobs + parallel search + integration tests | Added rayon-backed `--jobs` flag to typg-cli/typg-core with optional pool sizing, wired Python bindings + Fire CLI to accept jobs, and added integration tests against typf/test-fonts for Arabic script + variable JSON paths; documented jobs usage in README and PyPI README. | cargo test --workspace; pytest typg-python/tests |
| 2025-12-03 | Docs + migration + CI matrix + bench + python tests | Expanded README with CLI/Python/Rust usage + migration guidance, detailed ARCHITECTURE reuse/limits, added CI lint gate + cross-OS test matrix referencing typf/fontsimi layout, added pytest coverage for typg-python (variable filter + system font env override), recorded typg-cli live-scan microbench on typf/test-fonts (9 faces; 20 runs: mean 30.6 ms, min 6.5 ms, max 226 ms) and captured limits in docs/CHANGELOG. | cargo test --workspace; pytest typg-python/tests |
| 2025-12-01 | Release automation + naming cleanup | Added GitHub release workflow (wheels on semver tags, crates publish, GitHub release assets), set Rust CLI binary name to `typg`, fixed build/publish scripts for git-tag semver + token handling, documented build/publish flow | cargo fmt --all -- --check; cargo test --workspace |
| 2025-12-01 | Publish flow: crates.io + PyPI naming/version | Added hatch-vcs git-tag version sync in publish.sh, renamed PyPI package to `typg`, synced Cargo versions to 1.0.1, added `typg` shim package | maturin build --release --features extension-module |
| 2025-12-01 | PyO3 bindings + Fire CLI scaffold | Added `typg-python` crate with `find`/`filter_cached` bindings returning dicts, maturin `pyproject.toml`, and Fire-based `typgpy` wrapper; updated PLAN/TODO/README/CHANGELOG. | cargo test -p typg-python --tests; cargo test --workspace |
| 2025-12-01 | Bootstrap planning | Created PLAN/WORK/CHANGELOG, inventoried typf/fontgrep/fontgrepc/fontations/fontlift, defined success metrics and reuse choices | Not run (no test targets yet) |
| 2025-12-01 | Phase 1 spec + docs | Added docs/spec.md with fontgrep/fontgrepc parity matrix and crate layout, updated README.md and CLAUDE.md, checked off PLAN/TODO items | Not run (docs-only) |
| 2025-12-01 | Kick off typg-core | Documented no direct dependency on fontgrep/fontgrepc, scaffolded typg-core crate with filesystem discovery stub + tests; updated PLAN/TODO/spec | cargo fmt; cargo clippy -- -D warnings; cargo test |
| 2025-12-01 | Query parser + search pipeline | Added tag/codepoint parsers with property tests, baseline search pipeline with metadata extraction and NDJSON/JSON writers; updated PLAN/TODO | cargo fmt; cargo clippy -- -D warnings; cargo test |
| 2025-12-01 | Cache hook + CLI scaffold | Documented deferral of typf-fontdb cache integration, added cached metadata filtering in typg-core, scaffolded clap-based typg-cli find command with output modes | cargo fmt; cargo clippy -- -D warnings; cargo test |
| 2025-12-01 | CLI/discovery test hardening | Added nested/symlink discovery tests, NDJSON line-format check, and CLI help coverage; refreshed PLAN/TODO/CHANGELOG | cargo fmt; cargo clippy -- -D warnings; cargo test |
| 2025-12-01 | CLI stdin/system fonts/text filter | Added `--text` filter, STDIN path intake, and `--system-fonts` toggle with tests; updated PLAN/TODO/CHANGELOG | cargo fmt; cargo test |
| 2025-12-01 | CLI column output + bench | Added colorized/columnar text output with help snapshot tests; introduced criterion bench comparing codepoint parsers with fontgrep; updated PLAN/TODO/CHANGELOG | cargo fmt; cargo test |
